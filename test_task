import re
import json
from collections import Counter


def read_file(path):
    with open(path, 'r', encoding='utf-8') as read_file:
        text = read_file.read().lower()
        result = re.sub(r'[^\w\s]', '', text)
    return result


def find_letters(text):
    all_symbol = sum(1 for c in text if c.isalpha())
    cnt = Counter()
    for i in range(ord('а'), ord('я')):
        letter = chr(i)
        if text.count(letter) != 0:
            cnt[str(letter)] = round((text.count(letter)/all_symbol)*100, 2)
    return dict(cnt)


def write_file(all_entities, path):
    with open(path, "w") as write_file:
        print(all_entities)
        json.dump(all_entities, write_file, indent=4, ensure_ascii=False)


file = read_file('Task1.txt')
letters_in_file = find_letters(file)
common_dict = {"Буквы": letters_in_file}
write_file(common_dict, "new_file.txt")
